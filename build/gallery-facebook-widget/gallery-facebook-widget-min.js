YUI.add("gallery-facebook-widget",function(e,t){e.FacebookWidget=e.Base.create("gallery-facebook-widget",e.Widget,[],{fbData:null,initializer:function(){var t=this,n={fbAppId:this.get("fbAppId"),fbChannelFile:this.get("fbChannelFile"),onInit:function(e){t._log("data access initialized"),t.fbData.listSitePosts(t.get("fbSiteId"),function(e){t._log("site posts",e),t._set("posts",e.data)})}};this.fbData=new e.FacebookDAO(n)},destructor:function(){},bindUI:function(){var e=this;this.after("postsChange",this.syncUI,this),this.get("contentBox").delegate("mouseover",function(t){e.get("contentBox").all("li").removeClass("hover"),t.currentTarget.addClass("hover")},"li"),this.get("contentBox").delegate("click",function(e){window.open(e.currentTarget.getData("post-url"),"_blank").focus()},"li")},syncUI:function(){this.get("contentBox").one(".widget-content").setHTML(e.substitute(this.get("TEMPLATES").POSTS_LIST,{}));var t=this.get("contentBox").one("ul"),n=this.get("posts");for(var r=0;r<n.length;r++){var i=e.Node.create(e.substitute(this.get("TEMPLATES").POST,{image:n[r].fb_data.portrait_image,message:n[r].fb_data.message}));i.setData("post-url",n[r].actions[0].link),t.append(i)}},_log:function(e,t){console.log("["+this.getClassName()+"] "+e),t&&console.log(t)}},{ATTRS:{fbAppId:{value:null},fbChannelFile:{value:"/channel.html"},fbSiteId:{value:null},posts:{value:[],readOnly:!0},TEMPLATES:{value:{POSTS_LIST:"<ul></ul>",POST:'<li><img src="{image}"/><p>{message}</p><div class="clear"></div></li>'}}},HTML_PARSER:{}})},"@VERSION@",{requires:["widget","base-build","substitute","gallery-facebook-dao"],skinnable:!0});
